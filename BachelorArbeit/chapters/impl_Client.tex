\subsection{Client Implementierung}

JMX-Clients gibt es bereits in vielen Variationen. Sehr beliebt sind die JConsole, Java-, Shell- oder HTML-Clients\footnote{http://www.servletsuite.com/jmx/jmx-html.htm - Zugriff am 09. September 2012}. Im Folgenden werden ein Shell-Skript und eine Java Client Implementierung vorgestellt.

\subsubsection{Shell-Skript}
 F\"ur das Bash-Script wurde die jmxterm-1.0 library verwendet. Diese bietet eine intuitive Handhabung und erm√∂glicht einen einfachen Verbindungsaufbau. Der implementierte Client besteht aus einer bash-Datei f\"ur den Verbindungsaufbau und dem Starten der jmxterm.jar mit einer Ausf\"uhrungsliste. F\"ur eine RMI-Connection gen\"ugt der Aufruf der jmxterm library mit der entsprechenden Service URL. Die lokale Verbindung aus Listing \ref{lstscript} muss zun\"achst den erforderlichen \courier{MainServer} Process\footnote{jps: Java Virtual Machine Process Status Tool} bestimmen und diesen anschlie\ss end mit dem Schl\"usselwort open der Ausf\"uhrungsliste beif\"ugen. Der open Befehl \"offnet entweder eine neue JMX-Session oder gibt die aktuelle Verbindung wieder.
Eine Ausf\"uhrungsliste ist eine zus\"atzliche Text-Datei, die Anweisungen f\"ur den direkten Verbindungsaufbau zum \courier{MainServer} und alle gew\"unschten Methodenaufrufe erfasst.  

\begin{figure}[!htb]
	\lstinputlisting[style=stBash,nolol=true]{listings/run.sh}
	\lstinputlisting[caption={Bash-File und Ausf\"uhrungsliste}, captionpos=b, label=lstscript]{listings/script.txt}
\end{figure}

\subsubsection{Java Client}

Die Erstellung eines Java Clients verl\"auft relativ analog wie das eben beschriebene Beispiel. Zun\"achst wird wieder die JMX Verbindung per RMI oder Lokal aufgebaut. Danach wird ein \courier{MBeanServerConnection} Objekt erstellt \"uber dessen alle Methodenaufrufe ausgef\"uhrt werden. Sollen beispielsweise ein \courier{FaultValue} gesetzt werden, wird die Methode \courier{setFaultValue} in ein \courier{Attribute} Objekt verpackt und anschlie\ss end der \courier{MBeanServerConnection} mittels dessen Methode \courier{setAttribute} \"ubergeben. Getter-Methoden wie \courier{getCurrentFaults} k\"onnen analog mit \courier{getAttribute} ausgewertet werden. Handelt es sich bei einer Methode nicht um ein \courier{Attribute}\footnote{getter-/setter-Methoden mit nur einem Parameter} wird die Methode \courier{invoke} der \courier{MBeanServerConnection} verwendet. Diese bekommt als Parameter das \courier{ObjectName} Objekt, den Methodennamen und dessen Parameterwerte, als auch die Methodensignatur.

\newpage
\phantom{dd}
\begin{figure}[t!]
	\lstinputlisting[style=stJava,caption={Java Client}, captionpos=b, label=lstclient]{listings/Client1.java}
\end{figure}

%\subsubsection{HTML Adapter}
%
%Eine Connection \"uber einem HTML Adapter wird wie in Listing \ref{lsthtml} implementiert. Das Muster ist wieder dem der vorangegangen Clients sehr \"ahnliche. Zun\"achst wird eine Server-Connection aufgebaut und die Domain des Controller gew\"ahlt. Anschlie\ss end kann der HtmlAdaptorServer und das ObjectName Objekt sich am MBeanServer registrieren. Durch den Aufruf von http://localhost:9992 im Webbrowser kann \"uber den Adapter aus Listing \ref{lsthtml}, auf das Controller MBean zugegriffen werden.
%
%\begin{figure}[!htb]
%	\lstinputlisting[style=stJava,caption={Java Client}, captionpos=b, label=lsthtml]{listings/html.java}
%\end{figure}

